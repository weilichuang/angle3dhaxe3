<!DOCTYPE html>
<html lang="en"><!-- use theme color or fallback -->
<!--use textcolor from settings, otherwise create a contrasting color to theme color-->
<head><meta charset="utf-8"/><link href="../../../../bootstrap/css/bootstrap.min.css" rel="stylesheet"/><link href="../../../../bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"/><link href="../../../../bootstrap/css/bootstrap-select.min.css" rel="stylesheet"/><link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,700italic,400italic" rel="stylesheet" type="text/css"/><link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600,600italic,400" rel="stylesheet" type="text/css"/><link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet" type="text/css"/><script src="../../../../jquery-1.9.1.min.js"></script><script src="../../../../bootstrap/js/bootstrap.min.js"></script><script src="../../../../bootstrap/js/bootstrap-select.min.js"></script><link href="../../../../styles.css" rel="stylesheet"/><link href="../../../../haxe-nav.css" rel="stylesheet"/><script type="text/javascript">var dox = {rootPath: "../../../../",platforms: ["documentation"]};</script><script type="text/javascript" src="../../../../nav.js"></script><script type="text/javascript" src="../../../../index.js"></script><link rel="icon" href="../../../../favicon.ico" type="image/x-icon"></link><title>org.angle3d.bullet.control.BetterCharacterControl - Angle3D</title><meta name="description" content="This is intended to be a replacement for the internal bullet character class.
A RigidBody with cylinder collision shape is used and its velocity is set
continuously, a ray test is used to check if the character is on the ground."/></head><body><style>
.navbar .brand {
	display: inline-block;
	float: none;
	text-shadow: 0 0 0 transparent;
</style><nav class="nav"><div class="navbar"><div class="navbar-inner" style="background:#FAFAFA; border-bottom:1px solid rgba(0,0,0,.09)"><div class="container"><a class="brand" style="color:#000000" href="../../../../">Angle3D</a></div></div></div></nav><div class="container main-content"><div class="row-fluid"><div class="span3"><div class="well sidebar-nav"><form class="form-search" id="searchForm"><div class="input-prepend input-block-level"><span class="add-on"><i class="icon-search"></i></span><input id="search" type="text" placeholder="Search" autocomplete="off"/></div></form></div><div class="well sidebar-nav"><div id="nav"></div></div></div><div class="span9"><div class="page-header"><h1><small>class</small> BetterCharacterControl</h1><h4><small>package <a href="../../../../org/angle3d/bullet/control/index.html">org.angle3d.bullet.control</a></small></h4><h4><small>extends <a class="type" title="..." href="../../../../org/angle3d/bullet/control/AbstractPhysicsControl.html">AbstractPhysicsControl</a></small></h4>    <h4><small>implements <a class="type" title="Implement this interface to be called from the physics thread on a physics update." href="../../../../org/angle3d/bullet/PhysicsTickListener.html">PhysicsTickListener</a></small></h4></div><div class="body"><div class="doc doc-main"><div class="indent"><p>This is intended to be a replacement for the internal bullet character class.
A RigidBody with cylinder collision shape is used and its velocity is set
continuously, a ray test is used to check if the character is on the ground.</p>
<p>The character keeps his own local coordinate system which adapts based on the
gravity working on the character so the character will always stand upright.</p>
<p>Forces in the local x/z plane are dampened while those in the local y
direction are applied fully (e.g. jumping, falling).</p></div></div><h3 class="section">Constructor</h3><div class="fields"><div class="field "><a name="new"></a><h3><p><code><a href="#new"><span class="identifier">new</span></a> (<span style="white-space:nowrap">radius:<span class="type">Float</span>,</span> <span style="white-space:nowrap">height:<span class="type">Float</span>,</span> <span style="white-space:nowrap">mass:<span class="type">Float</span></span>)</code></p></h3><div class="doc"><p>Creates a new character with the given properties. Note that to avoid
issues the final height when ducking should be larger than 2x radius. The
jumpForce will be set to an upwards force of 5x mass.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>radius</code></th><td></td></tr><tr><th width="25%"><code>height</code></th><td></td></tr><tr><th width="25%"><code>null</code></th><td><p>mass</p></td></tr></table></div></div></div><h3 class="section">Methods</h3><div class="fields"><div class="field "><a name="getDuckedFactor"></a><h3><p><code><a href="#getDuckedFactor"><span class="identifier">getDuckedFactor</span></a> ():<span class="type">Float</span></code></p></h3><div class="doc"><p>Gets the height multiplication factor for ducking.</p>
<p>@return</p></div></div><div class="field "><a name="getGravity"></a><h3><p><code><a href="#getGravity"><span class="identifier">getGravity</span></a> (<span style="white-space:nowrap">?store:<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></span>):<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Get the current gravity of the character.</p>
<p>@return</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>store</code></th><td><p>The vector to store the result in</p></td></tr></table></div></div><div class="field "><a name="getJumpForce"></a><h3><p><code><a href="#getJumpForce"><span class="identifier">getJumpForce</span></a> ():<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Gets the current jump force. The default is 5 * character mass in y
direction.</p>
<p>@return</p></div></div><div class="field "><a name="getPhysicsDamping"></a><h3><p><code><a href="#getPhysicsDamping"><span class="identifier">getPhysicsDamping</span></a> ():<span class="type">Float</span></code></p></h3><div class="doc"><p>Gets how much the physics forces in the local x/z plane should be
dampened.</p></div></div><div class="field "><a name="getVelocity"></a><h3><p><code><a href="#getVelocity"><span class="identifier">getVelocity</span></a> ():<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Get the current linear velocity along the three axes of the character.
This is prepresented in world coordinates, parent coordinates when the
control is set to applyLocalPhysics.</p><p class="javadoc">Returns:</p><div class="indent inline-content"><p>The current linear velocity of the character</p></div></div></div><div class="field "><a name="getViewDirection"></a><h3><p><code><a href="#getViewDirection"><span class="identifier">getViewDirection</span></a> ():<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Gets the current view direction, note this doesn't need to correspond
with the spatials forward direction.</p>
<p>@return</p></div></div><div class="field "><a name="getWalkDirection"></a><h3><p><code><a href="#getWalkDirection"><span class="identifier">getWalkDirection</span></a> ():<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Gets the current walk direction and speed of the character. The length of
the vector defines the speed.</p>
<p>@return</p></div></div><div class="field "><a name="isDucked"></a><h3><p><code><a href="#isDucked"><span class="identifier">isDucked</span></a> ():<span class="type">Bool</span></code></p></h3><div class="doc"><p>Check if the character is ducking, either due to user input or due to
unducking being impossible at the moment (obstacle above).</p>
<p>@return</p></div></div><div class="field "><a name="isOnGround"></a><h3><p><code><a href="#isOnGround"><span class="identifier">isOnGround</span></a> ():<span class="type">Bool</span></code></p></h3><div class="doc"><p>Check if the character is on the ground. This is determined by a ray test
in the center of the character and might return false even if the
character is not falling yet.</p>
<p>@return</p></div></div><div class="field "><a name="jump"></a><h3><p><code><a href="#jump"><span class="identifier">jump</span></a> ():<span class="type">Void</span></code></p></h3><div class="doc"><p>Makes the character jump with the set jump force.</p></div></div><div class="field "><a name="physicsTick"></a><h3><p><code><a href="#physicsTick"><span class="identifier">physicsTick</span></a> (<span style="white-space:nowrap">space:<a class="type" title="" href="../../../../org/angle3d/bullet/PhysicsSpace.html">PhysicsSpace</a>,</span> <span style="white-space:nowrap">tpf:<span class="type">Float</span></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Used internally, don't call manually</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>space</code></th><td></td></tr><tr><th width="25%"><code>null</code></th><td><p>tpf</p></td></tr></table></div></div><div class="field "><a name="prePhysicsTick"></a><h3><p><code><a href="#prePhysicsTick"><span class="identifier">prePhysicsTick</span></a> (<span style="white-space:nowrap">space:<a class="type" title="" href="../../../../org/angle3d/bullet/PhysicsSpace.html">PhysicsSpace</a>,</span> <span style="white-space:nowrap">tpf:<span class="type">Float</span></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Used internally, don't call manually</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>space</code></th><td></td></tr><tr><th width="25%"><code>null</code></th><td><p>tpf</p></td></tr></table></div></div><div class="field "><a name="resetForward"></a><h3><p><code><a href="#resetForward"><span class="identifier">resetForward</span></a> (<span style="white-space:nowrap">vec:<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Realign the local forward vector to given direction vector, if null is
supplied Vector3f.UNIT_Z is used. Input vector has to be perpendicular to
current gravity vector. This normally only needs to be called when the
gravity direction changed continuously and the local forward vector is
off due to drift. E.g. after walking around on a sphere "planet" for a
while and then going back to a y-up coordinate system the local z-forward
might not be 100% alinged with Z axis.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>vec</code></th><td><p>The new forward vector, has to be perpendicular to the current
gravity vector!</p></td></tr></table></div></div><div class="field "><a name="setDucked"></a><h3><p><code><a href="#setDucked"><span class="identifier">setDucked</span></a> (<span style="white-space:nowrap">enabled:<span class="type">Bool</span></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Toggle character ducking. When ducked the characters capsule collision
shape height will be multiplied by duckedFactor to make the capsule
smaller. When unducking, the character will check with a ray test if it
can in fact unduck and only do so when its possible. You can check the
state of the unducking by checking isDucked().</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>null</code></th><td><p>enabled</p></td></tr></table></div></div><div class="field "><a name="setDuckedFactor"></a><h3><p><code><a href="#setDuckedFactor"><span class="identifier">setDuckedFactor</span></a> (<span style="white-space:nowrap">factor:<span class="type">Float</span></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Sets the height multiplication factor for ducking.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>factor</code></th><td><p>The factor by which the height should be multiplied when
ducking</p></td></tr></table></div></div><div class="field "><a name="setGravity"></a><h3><p><code><a href="#setGravity"><span class="identifier">setGravity</span></a> (<span style="white-space:nowrap">gravity:<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Set the gravity for this character. Note that this also realigns the
local coordinate system of the character so that continuous changes in
gravity direction are possible while maintaining a sensible control over
the character.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>null</code></th><td><p>gravity</p></td></tr></table></div></div><div class="field "><a name="setJumpForce"></a><h3><p><code><a href="#setJumpForce"><span class="identifier">setJumpForce</span></a> (<span style="white-space:nowrap">jumpForce:<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Set the jump force as a Vector3f. The jump force is local to the
characters coordinate system, which normally is always z-forward (in
world coordinates, parent coordinates when set to applyLocalPhysics)</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>jumpForce</code></th><td><p>The new jump force</p></td></tr></table></div></div><div class="field "><a name="setPhysicsDamping"></a><h3><p><code><a href="#setPhysicsDamping"><span class="identifier">setPhysicsDamping</span></a> (<span style="white-space:nowrap">physicsDamping:<span class="type">Float</span></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Sets how much the physics forces in the local x/z plane should be
dampened.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>physicsDamping</code></th><td><p>The dampening value, 0 = no dampening, 1 = no external force, default = 0.9</p></td></tr></table></div></div><div class="field "><a name="setViewDirection"></a><h3><p><code><a href="#setViewDirection"><span class="identifier">setViewDirection</span></a> (<span style="white-space:nowrap">vec:<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Sets the view direction for the character. Note this only defines the
rotation of the spatial in the local x/z plane of the character.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>null</code></th><td><p>vec</p></td></tr></table></div></div><div class="field "><a name="setWalkDirection"></a><h3><p><code><a href="#setWalkDirection"><span class="identifier">setWalkDirection</span></a> (<span style="white-space:nowrap">vec:<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Sets the walk direction of the character. This parameter is framerate
independent and the character will move continuously in the direction
given by the vector with the speed given by the vector length in m/s.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>vec</code></th><td><p>The movement direction and speed in m/s</p></td></tr></table></div></div><div class="field "><a name="warp"></a><h3><p><code><a href="#warp"><span class="identifier">warp</span></a> (<span style="white-space:nowrap">vec:<a class="type" title="" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Move the character somewhere. Note the character also takes the location
of any spatial its being attached to in the moment it is attached.</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>vec</code></th><td><p>The new character location.</p></td></tr></table></div></div></div>  <div class="inherited-fields well"><h3 class="section">Inherited Variables</h3><div class="fields"><div style="display:none"></div></div><h3 class="section">Inherited Methods</h3><div class="fields"><h4><a href="#" class="expand-button"><i class="fa fa-arrow-circle-o-right"></i></a> Defined by <a class="type" title="..." href="../../../../org/angle3d/bullet/control/AbstractPhysicsControl.html">AbstractPhysicsControl</a></h4><div style="display:none"><div class="field "><a name="dispose"></a><h3><p><code><a href="#dispose"><span class="identifier">dispose</span></a> ():<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="field "><a name="getPhysicsSpace"></a><h3><p><code><a href="#getPhysicsSpace"><span class="identifier">getPhysicsSpace</span></a> ():<a class="type" title="" href="../../../../org/angle3d/bullet/PhysicsSpace.html">PhysicsSpace</a></code></p></h3><div class="doc"><p></p></div></div><div class="field "><a name="isApplyPhysicsLocal"></a><h3><p><code><a href="#isApplyPhysicsLocal"><span class="identifier">isApplyPhysicsLocal</span></a> ():<span class="type">Bool</span></code></p></h3><div class="doc"><p></p></div></div><div class="field "><a name="isEnabled"></a><h3><p><code><a href="#isEnabled"><span class="identifier">isEnabled</span></a> ():<span class="type">Bool</span></code></p></h3><div class="doc"><p></p></div></div><div class="field "><a name="render"></a><h3><p><code><a href="#render"><span class="identifier">render</span></a> (<span style="white-space:nowrap">rm:<a class="type" title="RenderManager is a high-level rendering interface that is above the Renderer implementation." href="../../../../org/angle3d/renderer/RenderManager.html">RenderManager</a>,</span> <span style="white-space:nowrap">vp:<a class="type" title="A ViewPort represents a view inside the display window or a FrameBuffer to which scenes will be rendered." href="../../../../org/angle3d/renderer/ViewPort.html">ViewPort</a></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="field "><a name="setApplyPhysicsLocal"></a><h3><p><code><a href="#setApplyPhysicsLocal"><span class="identifier">setApplyPhysicsLocal</span></a> (<span style="white-space:nowrap">applyPhysicsLocal:<span class="type">Bool</span></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>When set to true, the physics coordinates will be applied to the local
translation of the Spatial</p><p class="javadoc">Parameters:</p><table class="table table-bordered params"><tr><th width="25%"><code>null</code></th><td><p>applyPhysicsLocal</p></td></tr></table></div></div><div class="field "><a name="setEnabled"></a><h3><p><code><a href="#setEnabled"><span class="identifier">setEnabled</span></a> (<span style="white-space:nowrap">enabled:<span class="type">Bool</span></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="field "><a name="setPhysicsSpace"></a><h3><p><code><a href="#setPhysicsSpace"><span class="identifier">setPhysicsSpace</span></a> (<span style="white-space:nowrap">space:<a class="type" title="" href="../../../../org/angle3d/bullet/PhysicsSpace.html">PhysicsSpace</a></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="field "><a name="setSpatial"></a><h3><p><code><a href="#setSpatial"><span class="identifier">setSpatial</span></a> (<span style="white-space:nowrap">spatial:<a class="type" title="Spatial defines the base class for scene graph nodes." href="../../../../org/angle3d/scene/Spatial.html">Spatial</a></span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div></div></div></div></div></div></div></div><footer class="section site-footer" style="background:#FAFAFA"><div class="container"><div class="copyright"><p style="color:#000000">&copy; 2016 &nbsp;</p></div></div></footer><script src="../../../..//highlighter.js"></script><link href="../../../../highlighter.css" rel="stylesheet"/></body></html>