<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><link href="../../../../bootstrap-combined.min.css" rel="stylesheet" /><script type="text/javascript" src="../../../../jquery-1.9.1.min.js"></script><script type="text/javascript" src="../../../../bootstrap.min.js"></script><link href="../../../../styles.css" rel="stylesheet" /><link rel="icon" href="../../../../favicon.ico" type="image/x-icon"></link><script type="text/javascript" src="../../../../nav.js"></script><script type="text/javascript" src="../../../../index.js"></script><script type="text/javascript">var dox = {rootPath: "../../../../",platforms: ["documentation"]};</script><title>KinematicRagdollControl - Angle3D</title></head><body><div class="navbar navbar-inverse navbar-fixed-top"><div class="navbar-inner"><form class="navbar-search pull-left" id="searchForm"><input id="search" type="text" class="search-query" placeholder="Filter" autocomplete="off"/></form><ul class="nav"><li id="select-platform" class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Platform<b class="caret"></b></a><ul class="dropdown-menu"><li data="all"><a href="#">All Platforms</a></li><li data="documentation"><a href="#">documentation</a></li></ul></li></ul></div></div><div id="container"><div id="nav"></div><div id="content"><div class="header"><h1><code><span class="directive">class </span><span class="type">org.angle3d.bullet.control.KinematicRagdollControl</span><span class="keyword"> extends</span> <a class="type" href="../../../../org/angle3d/bullet/control/AbstractPhysicsControl.html">AbstractPhysicsControl</a><span class="keyword"> implements</span> <a class="type" href="../../../../org/angle3d/bullet/collision/PhysicsCollisionListener.html">PhysicsCollisionListener</a></code></h1></div><div class="body"><p class="availability">Available on all platforms</p><div class="doc"><strong>This control is still a WIP, use it at your own risk</strong><br> To
use this control you need a model with an AnimControl and a
SkeletonControl.<br> This should be the case if you imported an animated
model from Ogre or blender.<br> Note enabling/disabling the control
add/removes it from the physic space<br> <p> This control creates collision
shapes for each bones of the skeleton when you call
spatial.addControl(ragdollControl). <ul> <li>The shape is HullCollision shape
based on the vertices associated with each bone and based on a tweakable
weight threshold (see setWeightThreshold)</li> <li>If you don't want each
bone to be a collision shape, you can specify what bone to use by using the
addBoneName method<br> By using this method, bone that are not used to create
a shape, are "merged" to their parent to create the collision shape. </li>
</ul> </p> <p> There are 2 modes for this control : <ul> <li><strong>The
kinematic modes :</strong><br> this is the default behavior, this means that
the collision shapes of the body are able to interact with physics enabled
objects. in this mode physic shapes follow the moovements of the animated
skeleton (for example animated by a key framed animation) this mode is
enabled by calling setKinematicMode(); </li> <li><strong>The ragdoll modes
:</strong><br> To enable this behavior, you need to call setRagdollMode()
method. In this mode the charater is entirely controled by physics, so it
will fall under the gravity and move if any force is applied to it. </li>
</ul> </p></div><h2>Instance Fields</h2><div class="platform platform-documentation"><a name="new"></a><h3><p><code><span class="keyword">function</span> <a href="#new"><span class="identifier">new</span></a>(preset:<a class="type" href="../../../../org/angle3d/bullet/control/ragdoll/RagdollPreset.html">RagdollPreset</a>, ?weightThreshold:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="addBoneName"></a><h3><p><code><span class="keyword">function</span> <a href="#addBoneName"><span class="identifier">addBoneName</span></a>(name:<span class="type">String</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Add a bone name to this control Using this method you can specify which
bones of the skeleton will be used to build the collision shapes.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>null</td><td><p>name</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="addCollisionListener"></a><h3><p><code><span class="keyword">function</span> <a href="#addCollisionListener"><span class="identifier">addCollisionListener</span></a>(listener:<a class="type" href="../../../../org/angle3d/bullet/collision/RagdollCollisionListener.html">RagdollCollisionListener</a>):<span class="type">Void</span></code></p></h3><div class="doc"><p>add a</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>null</td><td><p>listener</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="applyUserControl"></a><h3><p><code><span class="keyword">function</span> <a href="#applyUserControl"><span class="identifier">applyUserControl</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="blendToKinematicMode"></a><h3><p><code><span class="keyword">function</span> <a href="#blendToKinematicMode"><span class="identifier">blendToKinematicMode</span></a>(blendTime:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Smoothly blend from Ragdoll mode to Kinematic mode This is useful to
blend ragdoll actual position to a keyframe animation for example</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>blendTime</td><td><p>the blending time between ragdoll to anim.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="cloneForSpatial"></a><h3><p><code><span class="keyword">function</span> <a href="#cloneForSpatial"><span class="identifier">cloneForSpatial</span></a>(spatial:<a class="type" href="../../../../org/angle3d/scene/Spatial.html">Spatial</a>):<a class="type" href="../../../../org/angle3d/scene/control/Control.html">Control</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="collision"></a><h3><p><code><span class="keyword">function</span> <a href="#collision"><span class="identifier">collision</span></a>(event:<a class="type" href="../../../../org/angle3d/bullet/collision/PhysicsCollisionEvent.html">PhysicsCollisionEvent</a>):<span class="type">Void</span></code></p></h3><div class="doc"><p>For internal use only callback for collisionevent</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>null</td><td><p>event</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getBone"></a><h3><p><code><span class="keyword">function</span> <a href="#getBone"><span class="identifier">getBone</span></a>(name:<span class="type">String</span>):<a class="type" href="../../../../org/angle3d/animation/Bone.html">Bone</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getBoneRigidBody"></a><h3><p><code><span class="keyword">function</span> <a href="#getBoneRigidBody"><span class="identifier">getBoneRigidBody</span></a>(boneName:<span class="type">String</span>):<a class="type" href="../../../../org/angle3d/bullet/objects/PhysicsRigidBody.html">PhysicsRigidBody</a></code></p></h3><div class="doc"><p>return the rigidBody associated to the given bone</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>boneName</td><td><p>the name of the bone</p></td></tr><tr><td>returns</td><td><p>the associated rigidBody.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getEventDispatchImpulseThreshold"></a><h3><p><code><span class="keyword">function</span> <a href="#getEventDispatchImpulseThreshold"><span class="identifier">getEventDispatchImpulseThreshold</span></a>():<span class="type">Float</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getIKThreshold"></a><h3><p><code><span class="keyword">function</span> <a href="#getIKThreshold"><span class="identifier">getIKThreshold</span></a>():<span class="type">Float</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getIkRotSpeed"></a><h3><p><code><span class="keyword">function</span> <a href="#getIkRotSpeed"><span class="identifier">getIkRotSpeed</span></a>():<span class="type">Float</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getJoint"></a><h3><p><code><span class="keyword">function</span> <a href="#getJoint"><span class="identifier">getJoint</span></a>(boneName:<span class="type">String</span>):<a class="type" href="../../../../org/angle3d/bullet/joints/SixDofJoint.html">SixDofJoint</a></code></p></h3><div class="doc"><p>Return the joint between the given bone and its parent. This return null
if it's called before attaching the control to a spatial</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>boneName</td><td><p>the name of the bone</p></td></tr><tr><td>returns</td><td><p>the joint between the given bone and its parent</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getLimbDampening"></a><h3><p><code><span class="keyword">function</span> <a href="#getLimbDampening"><span class="identifier">getLimbDampening</span></a>():<span class="type">Float</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getMode"></a><h3><p><code><span class="keyword">function</span> <a href="#getMode"><span class="identifier">getMode</span></a>():<a class="type" href="../../../../org/angle3d/bullet/control/KinematicRagdollMode.html">KinematicRagdollMode</a></code></p></h3><div class="doc"><p>retruns the mode of this control</p>
<p>@return</p></div></div><div class="platform platform-documentation"><a name="getTotalMass"></a><h3><p><code><span class="keyword">function</span> <a href="#getTotalMass"><span class="identifier">getTotalMass</span></a>():<span class="type">Float</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getWeightThreshold"></a><h3><p><code><span class="keyword">function</span> <a href="#getWeightThreshold"><span class="identifier">getWeightThreshold</span></a>():<span class="type">Float</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="reBuild"></a><h3><p><code><span class="keyword">function</span> <a href="#reBuild"><span class="identifier">reBuild</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p>rebuild the ragdoll this is useful if you applied scale on the ragdoll
after it's been initialized, same as reattaching.</p></div></div><div class="platform platform-documentation"><a name="removeAllIKTargets"></a><h3><p><code><span class="keyword">function</span> <a href="#removeAllIKTargets"><span class="identifier">removeAllIKTargets</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="removeIKTarget"></a><h3><p><code><span class="keyword">function</span> <a href="#removeIKTarget"><span class="identifier">removeIKTarget</span></a>(bone:<a class="type" href="../../../../org/angle3d/animation/Bone.html">Bone</a>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="setCcdMotionThreshold"></a><h3><p><code><span class="keyword">function</span> <a href="#setCcdMotionThreshold"><span class="identifier">setCcdMotionThreshold</span></a>(value:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Set the CcdMotionThreshold of all the bone's rigidBodies of the ragdoll</p>
<p>@see PhysicsRigidBody#setCcdMotionThreshold(float)</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>null</td><td><p>value</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="setCcdSweptSphereRadius"></a><h3><p><code><span class="keyword">function</span> <a href="#setCcdSweptSphereRadius"><span class="identifier">setCcdSweptSphereRadius</span></a>(value:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Set the CcdSweptSphereRadius of all the bone's rigidBodies of the ragdoll</p>
<p>@see PhysicsRigidBody#setCcdSweptSphereRadius(float)</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>null</td><td><p>value</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="setEventDispatchImpulseThreshold"></a><h3><p><code><span class="keyword">function</span> <a href="#setEventDispatchImpulseThreshold"><span class="identifier">setEventDispatchImpulseThreshold</span></a>(eventDispatchImpulseThreshold:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="setIKMode"></a><h3><p><code><span class="keyword">function</span> <a href="#setIKMode"><span class="identifier">setIKMode</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p>Sets the control into Inverse Kinematics mode. The affected bones are affected by IK.
physics.</p></div></div><div class="platform platform-documentation"><a name="setIKTarget"></a><h3><p><code><span class="keyword">function</span> <a href="#setIKTarget"><span class="identifier">setIKTarget</span></a>(bone:<a class="type" href="../../../../org/angle3d/animation/Bone.html">Bone</a>, worldPos:<a class="type" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a>, chainLength:<span class="type">Int</span>):<a class="type" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="setIKThreshold"></a><h3><p><code><span class="keyword">function</span> <a href="#setIKThreshold"><span class="identifier">setIKThreshold</span></a>(IKThreshold:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="setIkRotSpeed"></a><h3><p><code><span class="keyword">function</span> <a href="#setIkRotSpeed"><span class="identifier">setIkRotSpeed</span></a>(ikRotSpeed:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="setJointLimit"></a><h3><p><code><span class="keyword">function</span> <a href="#setJointLimit"><span class="identifier">setJointLimit</span></a>(boneName:<span class="type">String</span>, maxX:<span class="type">Float</span>, minX:<span class="type">Float</span>, maxY:<span class="type">Float</span>, minY:<span class="type">Float</span>, maxZ:<span class="type">Float</span>, minZ:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Set the joint limits for the joint between the given bone and its parent.
This method can't work before attaching the control to a spatial</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>boneName</td><td><p>the name of the bone</p></td></tr><tr><td>maxX</td><td><p>the maximum rotation on the x axis (in radians)</p></td></tr><tr><td>minX</td><td><p>the minimum rotation on the x axis (in radians)</p></td></tr><tr><td>maxY</td><td><p>the maximum rotation on the y axis (in radians)</p></td></tr><tr><td>minY</td><td><p>the minimum rotation on the z axis (in radians)</p></td></tr><tr><td>maxZ</td><td><p>the maximum rotation on the z axis (in radians)</p></td></tr><tr><td>minZ</td><td><p>the minimum rotation on the z axis (in radians)</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="setKinematicMode"></a><h3><p><code><span class="keyword">function</span> <a href="#setKinematicMode"><span class="identifier">setKinematicMode</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p>Set the control into Kinematic mode In theis mode, the collision shapes
follow the movements of the skeleton, and can interact with physical
environement</p></div></div><div class="platform platform-documentation"><a name="setLimbDampening"></a><h3><p><code><span class="keyword">function</span> <a href="#setLimbDampening"><span class="identifier">setLimbDampening</span></a>(limbDampening:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="setRagdollMode"></a><h3><p><code><span class="keyword">function</span> <a href="#setRagdollMode"><span class="identifier">setRagdollMode</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p>Sets the control into Ragdoll mode The skeleton is entirely controlled by
physics.</p></div></div><div class="platform platform-documentation"><a name="setRootMass"></a><h3><p><code><span class="keyword">function</span> <a href="#setRootMass"><span class="identifier">setRootMass</span></a>(rootMass:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="setWeightThreshold"></a><h3><p><code><span class="keyword">function</span> <a href="#setWeightThreshold"><span class="identifier">setWeightThreshold</span></a>(weightThreshold:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="update"></a><h3><p><code><span class="keyword">function</span> <a href="#update"><span class="identifier">update</span></a>(tpf:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="updateBone"></a><h3><p><code><span class="keyword">function</span> <a href="#updateBone"><span class="identifier">updateBone</span></a>(link:<a class="type" href="../../../../org/angle3d/bullet/control/PhysicsBoneLink.html">PhysicsBoneLink</a>, tpf:<span class="type">Float</span>, vars:<a class="type" href="../../../../org/angle3d/utils/TempVars.html">TempVars</a>, tmpRot1:<a class="type" href="../../../../org/angle3d/math/Quaternion.html">Quaternion</a>, tmpRot2:<span class="type">Array</span>&lt;<a class="type" href="../../../../org/angle3d/math/Quaternion.html">Quaternion</a>&gt;, tipBone:<a class="type" href="../../../../org/angle3d/animation/Bone.html">Bone</a>, target:<a class="type" href="../../../../org/angle3d/math/Vector3f.html">Vector3f</a>, depth:<span class="type">Int</span>, maxDepth:<span class="type">Int</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div></div></div></div></body></html>