<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><link href="../../../bootstrap-combined.min.css" rel="stylesheet" /><script type="text/javascript" src="../../../jquery-1.9.1.min.js"></script><script type="text/javascript" src="../../../bootstrap.min.js"></script><link href="../../../styles.css" rel="stylesheet" /><link rel="icon" href="../../../favicon.ico" type="image/x-icon"></link><script type="text/javascript" src="../../../nav.js"></script><script type="text/javascript" src="../../../index.js"></script><script type="text/javascript">var dox = {rootPath: "../../../",platforms: ["documentation"]};</script><title>Bone - Angle3D</title></head><body><div class="navbar navbar-inverse navbar-fixed-top"><div class="navbar-inner"><form class="navbar-search pull-left" id="searchForm"><input id="search" type="text" class="search-query" placeholder="Filter" autocomplete="off"/></form><ul class="nav"><li id="select-platform" class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Platform<b class="caret"></b></a><ul class="dropdown-menu"><li data="all"><a href="#">All Platforms</a></li><li data="documentation"><a href="#">documentation</a></li></ul></li></ul></div></div><div id="container"><div id="nav"></div><div id="content"><div class="header"><h1><code><span class="directive">class </span><span class="type">org.angle3d.animation.Bone</span></code></h1></div><div class="body"><p class="availability">Available on all platforms</p><div class="doc"><p>Bone describes a bone in the bone-weight skeletal animation
system. A bone contains a name and an index, as well as relevant
transformation data.</p>
<p>A bone has 3 sets of transforms :
1. The bind transforms, that are the transforms of the bone when the skeleton
is in its rest pose (also called bind pose or T pose in the literature). 
The bind transforms are expressed in Local space meaning relatively to the 
parent bone.</p><ol><li>
<p>The Local transforms, that are the transforms of the bone once animation
or user transforms has been applied to the bind pose. The local transforms are
expressed in Local space meaning relatively to the parent bone.</p></li><li>
<p>The Model transforms, that are the transforms of the bone relatives to the 
rootBone of the skeleton. Those transforms are what is needed to apply skinning 
to the mesh the skeleton controls.
Note that there can be several rootBones in a skeleton. The one considered for 
these transforms is the one that is an ancestor of this bone.</p></li></ol></div><h2>Instance Fields</h2><div class="platform platform-documentation"><a name="children"></a><h3><p><code><span class="keyword">var</span> <a href="#children"><span class="identifier">children</span></a>:<span class="type">Vector</span>&lt;<a class="type" href="../../../org/angle3d/animation/Bone.html">Bone</a>&gt;</code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="localPos"></a><h3><p><code><span class="keyword">var</span> <a href="#localPos"><span class="identifier">localPos</span></a>:<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>本地坐标，相对于父骨骼
The local animated or user transform combined with the local bind transform</p></div></div><div class="platform platform-documentation"><a name="localRot"></a><h3><p><code><span class="keyword">var</span> <a href="#localRot"><span class="identifier">localRot</span></a>:<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="localScale"></a><h3><p><code><span class="keyword">var</span> <a href="#localScale"><span class="identifier">localScale</span></a>:<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="name"></a><h3><p><code><span class="keyword">var</span> <a href="#name"><span class="identifier">name</span></a>:<span class="type">String</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="parent"></a><h3><p><code><span class="keyword">var</span> <a href="#parent"><span class="identifier">parent</span></a>:<a class="type" href="../../../org/angle3d/animation/Bone.html">Bone</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="parentName"></a><h3><p><code><span class="keyword">var</span> <a href="#parentName"><span class="identifier">parentName</span></a>:<span class="type">String</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="useScale"></a><h3><p><code><span class="keyword">var</span> <a href="#useScale"><span class="identifier">useScale</span></a>:<span class="type">Bool</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="new"></a><h3><p><code><span class="keyword">function</span> <a href="#new"><span class="identifier">new</span></a>(name:<span class="type">String</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="addChild"></a><h3><p><code><span class="keyword">function</span> <a href="#addChild"><span class="identifier">addChild</span></a>(bone:<a class="type" href="../../../org/angle3d/animation/Bone.html">Bone</a>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Add a new child to this bone. Shouldn't be used by user code.
Can corrupt skeleton.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>bone</td><td><p>The bone to add</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="blendAnimTransforms"></a><h3><p><code><span class="keyword">function</span> <a href="#blendAnimTransforms"><span class="identifier">blendAnimTransforms</span></a>(tx:<span class="type">Float</span>, ty:<span class="type">Float</span>, tz:<span class="type">Float</span>, rx:<span class="type">Float</span>, ry:<span class="type">Float</span>, rz:<span class="type">Float</span>, rw:<span class="type">Float</span>, weight:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="blendAnimTransformsWithScale"></a><h3><p><code><span class="keyword">function</span> <a href="#blendAnimTransformsWithScale"><span class="identifier">blendAnimTransformsWithScale</span></a>(tx:<span class="type">Float</span>, ty:<span class="type">Float</span>, tz:<span class="type">Float</span>, rx:<span class="type">Float</span>, ry:<span class="type">Float</span>, rz:<span class="type">Float</span>, rw:<span class="type">Float</span>, sx:<span class="type">Float</span>, sy:<span class="type">Float</span>, sz:<span class="type">Float</span>, weight:<span class="type">Float</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="checkUseScale"></a><h3><p><code><span class="keyword">function</span> <a href="#checkUseScale"><span class="identifier">checkUseScale</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="clone"></a><h3><p><code><span class="keyword">function</span> <a href="#clone"><span class="identifier">clone</span></a>():<a class="type" href="../../../org/angle3d/animation/Bone.html">Bone</a></code></p></h3><div class="doc"><p>只克隆基础信息
@return</p></div></div><div class="platform platform-documentation"><a name="getAttachmentsNode"></a><h3><p><code><span class="keyword">function</span> <a href="#getAttachmentsNode"><span class="identifier">getAttachmentsNode</span></a>():<a class="type" href="../../../org/angle3d/scene/Node.html">Node</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getBindInverseTransform"></a><h3><p><code><span class="keyword">function</span> <a href="#getBindInverseTransform"><span class="identifier">getBindInverseTransform</span></a>(?result:<a class="type" href="../../../org/angle3d/math/Transform.html">Transform</a>):<a class="type" href="../../../org/angle3d/math/Transform.html">Transform</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getBindPosition"></a><h3><p><code><span class="keyword">function</span> <a href="#getBindPosition"><span class="identifier">getBindPosition</span></a>():<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Returns the bind position expressed in local space (relative to the parent bone).
<p>
The bind pose transform of the bone in local space is its "default"
transform with no animation applied.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>the bind position in local space.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getBindRotation"></a><h3><p><code><span class="keyword">function</span> <a href="#getBindRotation"><span class="identifier">getBindRotation</span></a>():<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a></code></p></h3><div class="doc"><p>Returns the bind rotation expressed in local space (relative to the parent bone).
<p>
The bind pose transform of the bone in local space is its "default"
transform with no animation applied.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>the bind rotation in local space.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getBindScale"></a><h3><p><code><span class="keyword">function</span> <a href="#getBindScale"><span class="identifier">getBindScale</span></a>():<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Returns the  bind scale expressed in local space (relative to the parent bone).
<p>
The bind pose transform of the bone in local space is its "default"
transform with no animation applied.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>the bind scale in local space.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getCombinedTransform"></a><h3><p><code><span class="keyword">function</span> <a href="#getCombinedTransform"><span class="identifier">getCombinedTransform</span></a>(position:<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a>, rotation:<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a>, ?result:<a class="type" href="../../../org/angle3d/math/Transform.html">Transform</a>):<a class="type" href="../../../org/angle3d/math/Transform.html">Transform</a></code></p></h3><div class="doc"><p>Returns the local transform of this bone combined with the given position and rotation</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>position</td><td><p>a position</p></td></tr><tr><td>rotation</td><td><p>a rotation</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getLocalPosition"></a><h3><p><code><span class="keyword">function</span> <a href="#getLocalPosition"><span class="identifier">getLocalPosition</span></a>():<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getLocalRotation"></a><h3><p><code><span class="keyword">function</span> <a href="#getLocalRotation"><span class="identifier">getLocalRotation</span></a>():<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getLocalScale"></a><h3><p><code><span class="keyword">function</span> <a href="#getLocalScale"><span class="identifier">getLocalScale</span></a>():<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getModelBindInverseTransform"></a><h3><p><code><span class="keyword">function</span> <a href="#getModelBindInverseTransform"><span class="identifier">getModelBindInverseTransform</span></a>(?result:<a class="type" href="../../../org/angle3d/math/Transform.html">Transform</a>):<a class="type" href="../../../org/angle3d/math/Transform.html">Transform</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getModelSpacePosition"></a><h3><p><code><span class="keyword">function</span> <a href="#getModelSpacePosition"><span class="identifier">getModelSpacePosition</span></a>():<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>模型空间坐标
Returns the position of the bone in model space.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>The position of the bone in model space.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getModelSpaceRotation"></a><h3><p><code><span class="keyword">function</span> <a href="#getModelSpaceRotation"><span class="identifier">getModelSpaceRotation</span></a>():<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a></code></p></h3><div class="doc"><p>Returns the rotation of the bone in model space.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>The rotation of the bone in model space.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getModelSpaceScale"></a><h3><p><code><span class="keyword">function</span> <a href="#getModelSpaceScale"><span class="identifier">getModelSpaceScale</span></a>():<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Returns the scale of the bone in model space.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>The scale of the bone in model space.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getOffsetTransform"></a><h3><p><code><span class="keyword">function</span> <a href="#getOffsetTransform"><span class="identifier">getOffsetTransform</span></a>(outTransform:<a class="type" href="../../../org/angle3d/math/Matrix4f.html">Matrix4f</a>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="getWorldBindInversePosition"></a><h3><p><code><span class="keyword">function</span> <a href="#getWorldBindInversePosition"><span class="identifier">getWorldBindInversePosition</span></a>():<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Returns the inverse world bind pose position.
<p>
The bind pose transform of the bone is its "default"
transform with no animation applied.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>the inverse world bind pose position.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getWorldBindInverseRotation"></a><h3><p><code><span class="keyword">function</span> <a href="#getWorldBindInverseRotation"><span class="identifier">getWorldBindInverseRotation</span></a>():<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a></code></p></h3><div class="doc"><p>Returns the inverse world bind pose rotation.
<p>
The bind pose transform of the bone is its "default"
transform with no animation applied.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>the inverse world bind pose rotation.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getWorldBindInverseScale"></a><h3><p><code><span class="keyword">function</span> <a href="#getWorldBindInverseScale"><span class="identifier">getWorldBindInverseScale</span></a>():<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Returns the inverse world bind pose scale.
<p>
The bind pose transform of the bone is its "default"
transform with no animation applied.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>the inverse world bind pose scale.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getWorldBindPosition"></a><h3><p><code><span class="keyword">function</span> <a href="#getWorldBindPosition"><span class="identifier">getWorldBindPosition</span></a>():<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Returns the world bind pose position.
<p>
The bind pose transform of the bone is its "default"
transform with no animation applied.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>the world bind pose position.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getWorldBindRotation"></a><h3><p><code><span class="keyword">function</span> <a href="#getWorldBindRotation"><span class="identifier">getWorldBindRotation</span></a>():<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a></code></p></h3><div class="doc"><p>Returns the world bind pose rotation.
<p>
The bind pose transform of the bone is its "default"
transform with no animation applied.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>the world bind pose rotation.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="getWorldBindScale"></a><h3><p><code><span class="keyword">function</span> <a href="#getWorldBindScale"><span class="identifier">getWorldBindScale</span></a>():<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a></code></p></h3><div class="doc"><p>Returns the world bind pose scale.
<p>
The bind pose transform of the bone is its "default"
transform with no animation applied.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>returns</td><td><p>the world bind pose scale.</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="hasUserControl"></a><h3><p><code><span class="keyword">function</span> <a href="#hasUserControl"><span class="identifier">hasUserControl</span></a>():<span class="type">Bool</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="reset"></a><h3><p><code><span class="keyword">function</span> <a href="#reset"><span class="identifier">reset</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p>Reset the bone and it's children to bind pose.</p></div></div><div class="platform platform-documentation"><a name="setAnimTransforms"></a><h3><p><code><span class="keyword">function</span> <a href="#setAnimTransforms"><span class="identifier">setAnimTransforms</span></a>(translation:<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a>, rotation:<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a>, scale:<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Sets the local animation transform of this bone.
Bone is assumed to be in bind pose when this is called.</p></div></div><div class="platform platform-documentation"><a name="setAttachmentsNode"></a><h3><p><code><span class="keyword">function</span> <a href="#setAttachmentsNode"><span class="identifier">setAttachmentsNode</span></a>(attachNode:<a class="type" href="../../../org/angle3d/scene/Node.html">Node</a>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Used internally after model cloning.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>null</td><td><p>attachNode</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="setBindTransforms"></a><h3><p><code><span class="keyword">function</span> <a href="#setBindTransforms"><span class="identifier">setBindTransforms</span></a>(translation:<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a>, rotation:<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a>, ?scale:<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Sets local bind transform for bone.
Call setBindingPose() after all of the skeleton bones' bind transforms are set_to save them.</p></div></div><div class="platform platform-documentation"><a name="setBindingPose"></a><h3><p><code><span class="keyword">function</span> <a href="#setBindingPose"><span class="identifier">setBindingPose</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p>设置骨骼的初始状态
Saves the current bone state as its binding pose, including its children.</p></div></div><div class="platform platform-documentation"><a name="setLocalRotation"></a><h3><p><code><span class="keyword">function</span> <a href="#setLocalRotation"><span class="identifier">setLocalRotation</span></a>(rot:<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a>):<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-documentation"><a name="setUserControl"></a><h3><p><code><span class="keyword">function</span> <a href="#setUserControl"><span class="identifier">setUserControl</span></a>(enable:<span class="type">Bool</span>):<span class="type">Void</span></code></p></h3><div class="doc"><p>If enabled, user can control bone transform with setUserTransforms.
Animation transforms are not applied to this bone when enabled.</p></div></div><div class="platform platform-documentation"><a name="setUserTransforms"></a><h3><p><code><span class="keyword">function</span> <a href="#setUserTransforms"><span class="identifier">setUserTransforms</span></a>(translation:<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a>, rotation:<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a>, scale:<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Sets the transforms of this bone in local space (relative to the parent bone)</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>translation</td><td><p>the translation in local space</p></td></tr><tr><td>rotation</td><td><p>the rotation in local space</p></td></tr><tr><td>scale</td><td><p>the scale in local space</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="setUserTransformsInModelSpace"></a><h3><p><code><span class="keyword">function</span> <a href="#setUserTransformsInModelSpace"><span class="identifier">setUserTransformsInModelSpace</span></a>(translation:<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a>, rotation:<a class="type" href="../../../org/angle3d/math/Quaternion.html">Quaternion</a>, ?scale:<a class="type" href="../../../org/angle3d/math/Vector3f.html">Vector3f</a>):<span class="type">Void</span></code></p></h3><div class="doc"><p>Sets the transforms of this bone in model space (relative to the root bone)</p>
<p>Must update all bones in skeleton for this to work.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>translation</td><td><p>translation in model space</p></td></tr><tr><td>rotation</td><td><p>rotation in model space</p></td></tr></tbody></table></div></div><div class="platform platform-documentation"><a name="update"></a><h3><p><code><span class="keyword">function</span> <a href="#update"><span class="identifier">update</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p>Updates the model transforms for this bone, and, possibly the attach node
if not null.
<p>
The model transform of this bone is computed by combining the parent's
model transform with this bones' local transform.</p></div></div><div class="platform platform-documentation"><a name="updateModelTransforms"></a><h3><p><code><span class="keyword">function</span> <a href="#updateModelTransforms"><span class="identifier">updateModelTransforms</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div></div></div></div></body></html>